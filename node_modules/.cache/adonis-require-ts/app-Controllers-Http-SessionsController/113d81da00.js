"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class SessionsController {
    async create({ view }) {
        return view.render('sessions/create');
    }
    async store({ auth, request, response }) {
        const email = request.input('email');
        const password = request.input('password');
        try {
            await auth.use('web').attempt(email, password);
            response.redirect().toRoute('home');
        }
        catch {
            return response.redirect().toRoute('sessions.create');
        }
    }
    async delete({ auth, response }) {
        await auth.use('web').logout();
        return response.redirect().toRoute('home');
    }
}
exports.default = SessionsController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2Vzc2lvbnNDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiU2Vzc2lvbnNDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsTUFBcUIsa0JBQWtCO0lBRTVCLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQXVCO1FBRTdDLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBRSxpQkFBaUIsQ0FBQyxDQUFBO0lBQzFDLENBQUM7SUFFTSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQXVCO1FBQy9ELE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDcEMsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUUxQyxJQUFHO1lBQ0MsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUE7WUFDOUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQTtTQUV0QztRQUFDLE1BQUs7WUFDSCxPQUFPLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtTQUN4RDtJQUNMLENBQUM7SUFFTSxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBdUI7UUFDdkQsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFBO1FBQzlCLE9BQU8sUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUM5QyxDQUFDO0NBQ0o7QUF4QkQscUNBd0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBIdHRwQ29udGV4dENvbnRyYWN0IH0gZnJvbSAnQGlvYzpBZG9uaXMvQ29yZS9IdHRwQ29udGV4dCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2Vzc2lvbnNDb250cm9sbGVyIHtcblxuICAgIHB1YmxpYyBhc3luYyBjcmVhdGUoeyB2aWV3IH06IEh0dHBDb250ZXh0Q29udHJhY3Qpe1xuXG4gICAgICAgIHJldHVybiB2aWV3LnJlbmRlciggJ3Nlc3Npb25zL2NyZWF0ZScpXG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHN0b3JlKHsgYXV0aCwgcmVxdWVzdCwgcmVzcG9uc2UgfTogSHR0cENvbnRleHRDb250cmFjdCl7XG4gICAgICAgIGNvbnN0IGVtYWlsID0gcmVxdWVzdC5pbnB1dCgnZW1haWwnKVxuICAgICAgICBjb25zdCBwYXNzd29yZCA9IHJlcXVlc3QuaW5wdXQoJ3Bhc3N3b3JkJylcblxuICAgICAgICB0cnl7XG4gICAgICAgICAgICBhd2FpdCBhdXRoLnVzZSgnd2ViJykuYXR0ZW1wdChlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICByZXNwb25zZS5yZWRpcmVjdCgpLnRvUm91dGUoJ2hvbWUnKVxuICAgICAgICBcbiAgICAgICAgfSBjYXRjaHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5yZWRpcmVjdCgpLnRvUm91dGUoJ3Nlc3Npb25zLmNyZWF0ZScpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZGVsZXRlKHsgYXV0aCwgcmVzcG9uc2UgfTogSHR0cENvbnRleHRDb250cmFjdCl7XG4gICAgICAgIGF3YWl0IGF1dGgudXNlKCd3ZWInKS5sb2dvdXQoKVxuICAgICAgICByZXR1cm4gcmVzcG9uc2UucmVkaXJlY3QoKS50b1JvdXRlKCdob21lJylcbiAgICB9XG59XG4iXX0=